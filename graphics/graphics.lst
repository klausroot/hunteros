     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_cpu_irq_disable
     7 00000000                                 	EXTERN	_outb
     8 00000000                                 	EXTERN	_cpu_irq_enable
     9 00000000                                 	EXTERN	_hankaku
    10 00000000                                 [FILE "graphics.c"]
    11                                          [SECTION .text]
    12 00000000                                 _init_screen_info:
    13 00000000 55                              	PUSH	EBP
    14 00000001 89 E5                           	MOV	EBP,ESP
    15 00000003 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
    16 00000006 A3 [00000140]                   	MOV	DWORD [_vram_addr],EAX
    17 0000000B 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
    18 0000000E 5D                              	POP	EBP
    19 0000000F A3 [00000144]                   	MOV	DWORD [_scrn_xsize],EAX
    20 00000014 C3                              	RET
    21 00000015                                 _get_vram_addr:
    22 00000015 55                              	PUSH	EBP
    23 00000016 A1 [00000140]                   	MOV	EAX,DWORD [_vram_addr]
    24 0000001B 89 E5                           	MOV	EBP,ESP
    25 0000001D 5D                              	POP	EBP
    26 0000001E C3                              	RET
    27 0000001F                                 _get_screen_width:
    28 0000001F 55                              	PUSH	EBP
    29 00000020 A1 [00000144]                   	MOV	EAX,DWORD [_scrn_xsize]
    30 00000025 89 E5                           	MOV	EBP,ESP
    31 00000027 5D                              	POP	EBP
    32 00000028 C3                              	RET
    33 00000029                                 	GLOBAL	_init_screen
    34 00000029                                 _init_screen:
    35 00000029 55                              	PUSH	EBP
    36 0000002A 89 E5                           	MOV	EBP,ESP
    37 0000002C 57                              	PUSH	EDI
    38 0000002D 56                              	PUSH	ESI
    39 0000002E 53                              	PUSH	EBX
    40 0000002F 83 EC 0C                        	SUB	ESP,12
    41 00000032 FF 75 0C                        	PUSH	DWORD [12+EBP]
    42 00000035 FF 75 08                        	PUSH	DWORD [8+EBP]
    43 00000038 E8 FFFFFFC3                     	CALL	_init_screen_info
    44 0000003D 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
    45 00000040 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
    46 00000043 4B                              	DEC	EBX
    47 00000044 83 E8 1D                        	SUB	EAX,29
    48 00000047 50                              	PUSH	EAX
    49 00000048 53                              	PUSH	EBX
    50 00000049 6A 00                           	PUSH	0
    51 0000004B 6A 00                           	PUSH	0
    52 0000004D 6A 0E                           	PUSH	14
    53 0000004F E8 00000117                     	CALL	_box_fill
    54 00000054 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
    55 00000057 83 E8 1C                        	SUB	EAX,28
    56 0000005A 50                              	PUSH	EAX
    57 0000005B 53                              	PUSH	EBX
    58 0000005C 50                              	PUSH	EAX
    59 0000005D 6A 00                           	PUSH	0
    60 0000005F 6A 08                           	PUSH	8
    61 00000061 E8 00000105                     	CALL	_box_fill
    62 00000066 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
    63 00000069 83 C4 30                        	ADD	ESP,48
    64 0000006C 83 E8 1B                        	SUB	EAX,27
    65 0000006F 50                              	PUSH	EAX
    66 00000070 53                              	PUSH	EBX
    67 00000071 50                              	PUSH	EAX
    68 00000072 6A 00                           	PUSH	0
    69 00000074 6A 07                           	PUSH	7
    70 00000076 E8 000000F0                     	CALL	_box_fill
    71 0000007B 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
    72 0000007E 48                              	DEC	EAX
    73 0000007F 50                              	PUSH	EAX
    74 00000080 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
    75 00000083 53                              	PUSH	EBX
    76 00000084 83 E8 1A                        	SUB	EAX,26
    77 00000087 50                              	PUSH	EAX
    78 00000088 6A 00                           	PUSH	0
    79 0000008A 6A 08                           	PUSH	8
    80 0000008C E8 000000DA                     	CALL	_box_fill
    81 00000091 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
    82 00000094 83 C4 28                        	ADD	ESP,40
    83 00000097 83 E8 18                        	SUB	EAX,24
    84 0000009A 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
    85 0000009D 50                              	PUSH	EAX
    86 0000009E 6A 3B                           	PUSH	59
    87 000000A0 50                              	PUSH	EAX
    88 000000A1 6A 03                           	PUSH	3
    89 000000A3 6A 07                           	PUSH	7
    90 000000A5 E8 000000C1                     	CALL	_box_fill
    91 000000AA 8B 7D 10                        	MOV	EDI,DWORD [16+EBP]
    92 000000AD 83 EF 04                        	SUB	EDI,4
    93 000000B0 57                              	PUSH	EDI
    94 000000B1 6A 02                           	PUSH	2
    95 000000B3 FF 75 F0                        	PUSH	DWORD [-16+EBP]
    96 000000B6 6A 02                           	PUSH	2
    97 000000B8 6A 07                           	PUSH	7
    98 000000BA E8 000000AC                     	CALL	_box_fill
    99 000000BF 83 C4 28                        	ADD	ESP,40
   100 000000C2 57                              	PUSH	EDI
   101 000000C3 6A 3B                           	PUSH	59
   102 000000C5 57                              	PUSH	EDI
   103 000000C6 6A 03                           	PUSH	3
   104 000000C8 6A 0F                           	PUSH	15
   105 000000CA E8 0000009C                     	CALL	_box_fill
   106 000000CF 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   107 000000D2 57                              	PUSH	EDI
   108 000000D3 83 E8 17                        	SUB	EAX,23
   109 000000D6 6A 3B                           	PUSH	59
   110 000000D8 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   111 000000DB 50                              	PUSH	EAX
   112 000000DC 6A 3B                           	PUSH	59
   113 000000DE 6A 0F                           	PUSH	15
   114 000000E0 E8 00000086                     	CALL	_box_fill
   115 000000E5 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   116 000000E8 83 C4 28                        	ADD	ESP,40
   117 000000EB 83 E8 03                        	SUB	EAX,3
   118 000000EE 89 45 E8                        	MOV	DWORD [-24+EBP],EAX
   119 000000F1 50                              	PUSH	EAX
   120 000000F2 6A 3C                           	PUSH	60
   121 000000F4 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   122 000000F7 6A 3C                           	PUSH	60
   123 000000F9 6A 00                           	PUSH	0
   124 000000FB E8 0000006B                     	CALL	_box_fill
   125 00000100 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   126 00000103 6A 3B                           	PUSH	59
   127 00000105 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   128 00000108 6A 02                           	PUSH	2
   129 0000010A 6A 00                           	PUSH	0
   130 0000010C E8 0000005A                     	CALL	_box_fill
   131 00000111 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   132 00000114 83 C4 28                        	ADD	ESP,40
   133 00000117 8B 75 0C                        	MOV	ESI,DWORD [12+EBP]
   134 0000011A FF 75 F0                        	PUSH	DWORD [-16+EBP]
   135 0000011D 83 EE 04                        	SUB	ESI,4
   136 00000120 83 EB 2F                        	SUB	EBX,47
   137 00000123 56                              	PUSH	ESI
   138 00000124 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   139 00000127 53                              	PUSH	EBX
   140 00000128 6A 0F                           	PUSH	15
   141 0000012A E8 0000003C                     	CALL	_box_fill
   142 0000012F 57                              	PUSH	EDI
   143 00000130 53                              	PUSH	EBX
   144 00000131 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   145 00000134 53                              	PUSH	EBX
   146 00000135 6A 0F                           	PUSH	15
   147 00000137 E8 0000002F                     	CALL	_box_fill
   148 0000013C 83 C4 28                        	ADD	ESP,40
   149 0000013F FF 75 E8                        	PUSH	DWORD [-24+EBP]
   150 00000142 56                              	PUSH	ESI
   151 00000143 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   152 00000146 53                              	PUSH	EBX
   153 00000147 6A 07                           	PUSH	7
   154 00000149 E8 0000001D                     	CALL	_box_fill
   155 0000014E 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   156 00000151 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   157 00000154 83 E8 03                        	SUB	EAX,3
   158 00000157 50                              	PUSH	EAX
   159 00000158 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   160 0000015B 50                              	PUSH	EAX
   161 0000015C 6A 07                           	PUSH	7
   162 0000015E E8 00000008                     	CALL	_box_fill
   163 00000163 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   164 00000166 5B                              	POP	EBX
   165 00000167 5E                              	POP	ESI
   166 00000168 5F                              	POP	EDI
   167 00000169 5D                              	POP	EBP
   168 0000016A C3                              	RET
   169 0000016B                                 	GLOBAL	_box_fill
   170 0000016B                                 _box_fill:
   171 0000016B 55                              	PUSH	EBP
   172 0000016C 89 E5                           	MOV	EBP,ESP
   173 0000016E 57                              	PUSH	EDI
   174 0000016F 56                              	PUSH	ESI
   175 00000170 53                              	PUSH	EBX
   176 00000171 83 EC 0C                        	SUB	ESP,12
   177 00000174 8A 45 08                        	MOV	AL,BYTE [8+EBP]
   178 00000177 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   179 0000017A E8 FFFFFE96                     	CALL	_get_vram_addr
   180 0000017F 89 45 E8                        	MOV	DWORD [-24+EBP],EAX
   181 00000182 E8 FFFFFE98                     	CALL	_get_screen_width
   182 00000187 8B 4D 10                        	MOV	ECX,DWORD [16+EBP]
   183 0000018A 89 C6                           	MOV	ESI,EAX
   184 0000018C 3B 4D 18                        	CMP	ECX,DWORD [24+EBP]
   185 0000018F 7F 33                           	JG	L17
   186 00000191 89 CB                           	MOV	EBX,ECX
   187 00000193 0F AF D8                        	IMUL	EBX,EAX
   188 00000196                                 L15:
   189 00000196 8B 55 0C                        	MOV	EDX,DWORD [12+EBP]
   190 00000199 3B 55 14                        	CMP	EDX,DWORD [20+EBP]
   191 0000019C 7F 1E                           	JG	L19
   192 0000019E 8B 7D E8                        	MOV	EDI,DWORD [-24+EBP]
   193 000001A1 8D 04 1F                        	LEA	EAX,DWORD [EDI+EBX*1]
   194 000001A4 8D 04 10                        	LEA	EAX,DWORD [EAX+EDX*1]
   195 000001A7 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   196 000001AA                                 L14:
   197 000001AA 8B 7D EC                        	MOV	EDI,DWORD [-20+EBP]
   198 000001AD 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   199 000001B0 42                              	INC	EDX
   200 000001B1 88 07                           	MOV	BYTE [EDI],AL
   201 000001B3 47                              	INC	EDI
   202 000001B4 89 7D EC                        	MOV	DWORD [-20+EBP],EDI
   203 000001B7 3B 55 14                        	CMP	EDX,DWORD [20+EBP]
   204 000001BA 7E EE                           	JLE	L14
   205 000001BC                                 L19:
   206 000001BC 41                              	INC	ECX
   207 000001BD 01 F3                           	ADD	EBX,ESI
   208 000001BF 3B 4D 18                        	CMP	ECX,DWORD [24+EBP]
   209 000001C2 7E D2                           	JLE	L15
   210 000001C4                                 L17:
   211 000001C4 83 C4 0C                        	ADD	ESP,12
   212 000001C7 31 C0                           	XOR	EAX,EAX
   213 000001C9 5B                              	POP	EBX
   214 000001CA 5E                              	POP	ESI
   215 000001CB 5F                              	POP	EDI
   216 000001CC 5D                              	POP	EBP
   217 000001CD C3                              	RET
   218                                          [SECTION .data]
   219 00000000                                 _color_tbl:
   220 00000000 00000000                        	DD	0
   221 00000004 00FF0000                        	DD	16711680
   222 00000008 0000FF00                        	DD	65280
   223 0000000C 00FFFF00                        	DD	16776960
   224 00000010 000000FF                        	DD	255
   225 00000014 00FF00FF                        	DD	16711935
   226 00000018 0000FFFF                        	DD	65535
   227 0000001C 00FFFFFF                        	DD	16777215
   228 00000020 00C6C6C6                        	DD	13027014
   229 00000024 00840000                        	DD	8650752
   230 00000028 00008400                        	DD	33792
   231 0000002C 00848400                        	DD	8684544
   232 00000030 00000084                        	DD	132
   233 00000034 00840084                        	DD	8650884
   234 00000038 00008484                        	DD	33924
   235 0000003C 00848484                        	DD	8684676
   236                                          [SECTION .text]
   237 000001CE                                 	GLOBAL	_init_palette
   238 000001CE                                 _init_palette:
   239 000001CE 55                              	PUSH	EBP
   240 000001CF 89 E5                           	MOV	EBP,ESP
   241 000001D1 68 [00000000]                   	PUSH	_color_tbl
   242 000001D6 6A 0F                           	PUSH	15
   243 000001D8 6A 00                           	PUSH	0
   244 000001DA E8 00000002                     	CALL	_set_palette
   245 000001DF C9                              	LEAVE
   246 000001E0 C3                              	RET
   247 000001E1                                 _set_palette:
   248 000001E1 55                              	PUSH	EBP
   249 000001E2 89 E5                           	MOV	EBP,ESP
   250 000001E4 57                              	PUSH	EDI
   251 000001E5 56                              	PUSH	ESI
   252 000001E6 53                              	PUSH	EBX
   253 000001E7 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   254 000001EA 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   255 000001ED 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   256 000001F0 E8 [00000000]                   	CALL	_cpu_irq_disable
   257 000001F5 0F B6 C3                        	MOVZX	EAX,BL
   258 000001F8 50                              	PUSH	EAX
   259 000001F9 68 000003C8                     	PUSH	968
   260 000001FE E8 [00000000]                   	CALL	_outb
   261 00000203 39 FB                           	CMP	EBX,EDI
   262 00000205 58                              	POP	EAX
   263 00000206 5A                              	POP	EDX
   264 00000207 7E 0C                           	JLE	L26
   265 00000209                                 L28:
   266 00000209 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   267 0000020C 5B                              	POP	EBX
   268 0000020D 5E                              	POP	ESI
   269 0000020E 5F                              	POP	EDI
   270 0000020F 5D                              	POP	EBP
   271 00000210 E9 [00000000]                   	JMP	_cpu_irq_enable
   272 00000215                                 L26:
   273 00000215 8A 44 9E 02                     	MOV	AL,BYTE [2+ESI+EBX*4]
   274 00000219 C0 E8 02                        	SHR	AL,2
   275 0000021C 0F B6 C0                        	MOVZX	EAX,AL
   276 0000021F 50                              	PUSH	EAX
   277 00000220 68 000003C9                     	PUSH	969
   278 00000225 E8 [00000000]                   	CALL	_outb
   279 0000022A 8B 04 9E                        	MOV	EAX,DWORD [ESI+EBX*4]
   280 0000022D C1 E8 0A                        	SHR	EAX,10
   281 00000230 83 E0 3F                        	AND	EAX,63
   282 00000233 50                              	PUSH	EAX
   283 00000234 68 000003C9                     	PUSH	969
   284 00000239 E8 [00000000]                   	CALL	_outb
   285 0000023E 8A 04 9E                        	MOV	AL,BYTE [ESI+EBX*4]
   286 00000241 C0 E8 02                        	SHR	AL,2
   287 00000244 43                              	INC	EBX
   288 00000245 0F B6 C0                        	MOVZX	EAX,AL
   289 00000248 50                              	PUSH	EAX
   290 00000249 68 000003C9                     	PUSH	969
   291 0000024E E8 [00000000]                   	CALL	_outb
   292 00000253 83 C4 18                        	ADD	ESP,24
   293 00000256 39 FB                           	CMP	EBX,EDI
   294 00000258 7E BB                           	JLE	L26
   295 0000025A EB AD                           	JMP	L28
   296 0000025C                                 	GLOBAL	_draw_font8
   297 0000025C                                 _draw_font8:
   298 0000025C 55                              	PUSH	EBP
   299 0000025D 89 E5                           	MOV	EBP,ESP
   300 0000025F 57                              	PUSH	EDI
   301 00000260 56                              	PUSH	ESI
   302 00000261 31 F6                           	XOR	ESI,ESI
   303 00000263 53                              	PUSH	EBX
   304 00000264 53                              	PUSH	EBX
   305 00000265 8A 5D 10                        	MOV	BL,BYTE [16+EBP]
   306 00000268 E8 FFFFFDA8                     	CALL	_get_vram_addr
   307 0000026D 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   308 00000270 E8 FFFFFDAA                     	CALL	_get_screen_width
   309 00000275 89 C7                           	MOV	EDI,EAX
   310 00000277                                 L42:
   311 00000277 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   312 0000027A 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   313 0000027D 01 F0                           	ADD	EAX,ESI
   314 0000027F 0F AF C7                        	IMUL	EAX,EDI
   315 00000282 03 45 F0                        	ADD	EAX,DWORD [-16+EBP]
   316 00000285 8D 0C 02                        	LEA	ECX,DWORD [EDX+EAX*1]
   317 00000288 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   318 0000028B 8A 14 06                        	MOV	DL,BYTE [ESI+EAX*1]
   319 0000028E 84 D2                           	TEST	DL,DL
   320 00000290 79 02                           	JNS	L34
   321 00000292 88 19                           	MOV	BYTE [ECX],BL
   322 00000294                                 L34:
   323 00000294 88 D0                           	MOV	AL,DL
   324 00000296 83 E0 40                        	AND	EAX,64
   325 00000299 84 C0                           	TEST	AL,AL
   326 0000029B 74 03                           	JE	L35
   327 0000029D 88 59 01                        	MOV	BYTE [1+ECX],BL
   328 000002A0                                 L35:
   329 000002A0 88 D0                           	MOV	AL,DL
   330 000002A2 83 E0 20                        	AND	EAX,32
   331 000002A5 84 C0                           	TEST	AL,AL
   332 000002A7 74 03                           	JE	L36
   333 000002A9 88 59 02                        	MOV	BYTE [2+ECX],BL
   334 000002AC                                 L36:
   335 000002AC 88 D0                           	MOV	AL,DL
   336 000002AE 83 E0 10                        	AND	EAX,16
   337 000002B1 84 C0                           	TEST	AL,AL
   338 000002B3 74 03                           	JE	L37
   339 000002B5 88 59 03                        	MOV	BYTE [3+ECX],BL
   340 000002B8                                 L37:
   341 000002B8 88 D0                           	MOV	AL,DL
   342 000002BA 83 E0 08                        	AND	EAX,8
   343 000002BD 84 C0                           	TEST	AL,AL
   344 000002BF 74 03                           	JE	L38
   345 000002C1 88 59 04                        	MOV	BYTE [4+ECX],BL
   346 000002C4                                 L38:
   347 000002C4 88 D0                           	MOV	AL,DL
   348 000002C6 83 E0 04                        	AND	EAX,4
   349 000002C9 84 C0                           	TEST	AL,AL
   350 000002CB 74 03                           	JE	L39
   351 000002CD 88 59 05                        	MOV	BYTE [5+ECX],BL
   352 000002D0                                 L39:
   353 000002D0 88 D0                           	MOV	AL,DL
   354 000002D2 83 E0 02                        	AND	EAX,2
   355 000002D5 84 C0                           	TEST	AL,AL
   356 000002D7 74 03                           	JE	L40
   357 000002D9 88 59 06                        	MOV	BYTE [6+ECX],BL
   358 000002DC                                 L40:
   359 000002DC 83 E2 01                        	AND	EDX,1
   360 000002DF 84 D2                           	TEST	DL,DL
   361 000002E1 74 03                           	JE	L32
   362 000002E3 88 59 07                        	MOV	BYTE [7+ECX],BL
   363 000002E6                                 L32:
   364 000002E6 46                              	INC	ESI
   365 000002E7 83 FE 0F                        	CMP	ESI,15
   366 000002EA 7E 8B                           	JLE	L42
   367 000002EC 59                              	POP	ECX
   368 000002ED 5B                              	POP	EBX
   369 000002EE 5E                              	POP	ESI
   370 000002EF 5F                              	POP	EDI
   371 000002F0 5D                              	POP	EBP
   372 000002F1 C3                              	RET
   373 000002F2                                 	GLOBAL	_draw_ascii_font8
   374 000002F2                                 _draw_ascii_font8:
   375 000002F2 55                              	PUSH	EBP
   376 000002F3 89 E5                           	MOV	EBP,ESP
   377 000002F5 57                              	PUSH	EDI
   378 000002F6 56                              	PUSH	ESI
   379 000002F7 53                              	PUSH	EBX
   380 000002F8 56                              	PUSH	ESI
   381 000002F9 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   382 000002FC 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   383 000002FF 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   384 00000302 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   385 00000305 83 C8 FF                        	OR	EAX,-1
   386 00000308 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   387 0000030B 85 D2                           	TEST	EDX,EDX
   388 0000030D 74 09                           	JE	L45
   389 0000030F 89 D3                           	MOV	EBX,EDX
   390 00000311 80 3A 00                        	CMP	BYTE [EDX],0
   391 00000314 75 0A                           	JNE	L51
   392 00000316                                 L53:
   393 00000316 31 C0                           	XOR	EAX,EAX
   394 00000318                                 L45:
   395 00000318 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   396 0000031B 5B                              	POP	EBX
   397 0000031C 5E                              	POP	ESI
   398 0000031D 5F                              	POP	EDI
   399 0000031E 5D                              	POP	EBP
   400 0000031F C3                              	RET
   401 00000320                                 L51:
   402 00000320 0F BE 03                        	MOVSX	EAX,BYTE [EBX]
   403 00000323 C1 E0 04                        	SAL	EAX,4
   404 00000326 43                              	INC	EBX
   405 00000327 05 [00000000]                   	ADD	EAX,_hankaku
   406 0000032C 50                              	PUSH	EAX
   407 0000032D 0F B6 45 F3                     	MOVZX	EAX,BYTE [-13+EBP]
   408 00000331 50                              	PUSH	EAX
   409 00000332 57                              	PUSH	EDI
   410 00000333 56                              	PUSH	ESI
   411 00000334 83 C6 08                        	ADD	ESI,8
   412 00000337 E8 FFFFFF20                     	CALL	_draw_font8
   413 0000033C 83 C4 10                        	ADD	ESP,16
   414 0000033F 80 3B 00                        	CMP	BYTE [EBX],0
   415 00000342 75 DC                           	JNE	L51
   416 00000344 EB D0                           	JMP	L53
   417                                          [SECTION .data]
   418 00000040                                 _cursor:
   419 00000040 2A 2A 2A 2A 2A 2A 2A 2A 2A 2A   	DB	"**************.."
       0000004A 2A 2A 2A 2A 2E 2E 
   420 00000050 2A 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"*OOOOOOOOOOO*..."
       0000005A 4F 4F 2A 2E 2E 2E 
   421 00000060 2A 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"*OOOOOOOOOO*...."
       0000006A 4F 2A 2E 2E 2E 2E 
   422 00000070 2A 4F 4F 4F 4F 4F 4F 4F 4F 4F   	DB	"*OOOOOOOOO*....."
       0000007A 2A 2E 2E 2E 2E 2E 
   423 00000080 2A 4F 4F 4F 4F 4F 4F 4F 4F 2A   	DB	"*OOOOOOOO*......"
       0000008A 2E 2E 2E 2E 2E 2E 
   424 00000090 2A 4F 4F 4F 4F 4F 4F 4F 2A 2E   	DB	"*OOOOOOO*......."
       0000009A 2E 2E 2E 2E 2E 2E 
   425 000000A0 2A 4F 4F 4F 4F 4F 4F 4F 2A 2E   	DB	"*OOOOOOO*......."
       000000AA 2E 2E 2E 2E 2E 2E 
   426 000000B0 2A 4F 4F 4F 4F 4F 4F 4F 4F 2A   	DB	"*OOOOOOOO*......"
       000000BA 2E 2E 2E 2E 2E 2E 
   427 000000C0 2A 4F 4F 4F 4F 2A 2A 4F 4F 4F   	DB	"*OOOO**OOO*....."
       000000CA 2A 2E 2E 2E 2E 2E 
   428 000000D0 2A 4F 4F 4F 2A 2E 2E 2A 4F 4F   	DB	"*OOO*..*OOO*...."
       000000DA 4F 2A 2E 2E 2E 2E 
   429 000000E0 2A 6F 6F 2A 2E 2E 2E 2E 2A 4F   	DB	"*oo*....*OOO*..."
       000000EA 4F 4F 2A 2E 2E 2E 
   430 000000F0 2A 6F 2A 2E 2E 2E 2E 2E 2E 2A   	DB	"*o*......*OOO*.."
       000000FA 4F 4F 4F 2A 2E 2E 
   431 00000100 2A 2A 2E 2E 2E 2E 2E 2E 2E 2E   	DB	"**........*OOO*."
       0000010A 2A 4F 4F 4F 2A 2E 
   432 00000110 2A 2E 2E 2E 2E 2E 2E 2E 2E 2E   	DB	"*..........*OOO*"
       0000011A 2E 2A 4F 4F 4F 2A 
   433 00000120 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E   	DB	"............*OO*"
       0000012A 2E 2E 2A 4F 4F 2A 
   434 00000130 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E   	DB	".............***"
       0000013A 2E 2E 2E 2A 2A 2A 
   435                                          [SECTION .text]
   436 00000346                                 	GLOBAL	_init_mouse_cursor8
   437 00000346                                 _init_mouse_cursor8:
   438 00000346 55                              	PUSH	EBP
   439 00000347 31 C9                           	XOR	ECX,ECX
   440 00000349 89 E5                           	MOV	EBP,ESP
   441 0000034B 57                              	PUSH	EDI
   442 0000034C 31 FF                           	XOR	EDI,EDI
   443 0000034E 56                              	PUSH	ESI
   444 0000034F 31 F6                           	XOR	ESI,ESI
   445 00000351 53                              	PUSH	EBX
   446 00000352 50                              	PUSH	EAX
   447 00000353 8A 45 0C                        	MOV	AL,BYTE [12+EBP]
   448 00000356 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   449 00000359 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   450 0000035C                                 L66:
   451 0000035C 8D 04 3E                        	LEA	EAX,DWORD [ESI+EDI*1]
   452 0000035F 80 B8 [00000040] 2A             	CMP	BYTE [_cursor+EAX],42
   453 00000366 74 39                           	JE	L72
   454 00000368                                 L63:
   455 00000368 80 B8 [00000040] 4F             	CMP	BYTE [_cursor+EAX],79
   456 0000036F 74 2A                           	JE	L73
   457 00000371                                 L64:
   458 00000371 80 B8 [00000040] 2E             	CMP	BYTE [_cursor+EAX],46
   459 00000378 74 19                           	JE	L74
   460 0000037A                                 L61:
   461 0000037A 46                              	INC	ESI
   462 0000037B 83 FE 0F                        	CMP	ESI,15
   463 0000037E 7E DC                           	JLE	L66
   464 00000380 41                              	INC	ECX
   465 00000381 83 C7 10                        	ADD	EDI,16
   466 00000384 83 F9 0F                        	CMP	ECX,15
   467 00000387 7F 04                           	JG	L75
   468 00000389 31 F6                           	XOR	ESI,ESI
   469 0000038B EB CF                           	JMP	L66
   470 0000038D                                 L75:
   471 0000038D 5F                              	POP	EDI
   472 0000038E 5B                              	POP	EBX
   473 0000038F 5E                              	POP	ESI
   474 00000390 5F                              	POP	EDI
   475 00000391 5D                              	POP	EBP
   476 00000392 C3                              	RET
   477 00000393                                 L74:
   478 00000393 8A 55 F3                        	MOV	DL,BYTE [-13+EBP]
   479 00000396 88 14 18                        	MOV	BYTE [EAX+EBX*1],DL
   480 00000399 EB DF                           	JMP	L61
   481 0000039B                                 L73:
   482 0000039B C6 04 18 07                     	MOV	BYTE [EAX+EBX*1],7
   483 0000039F EB D0                           	JMP	L64
   484 000003A1                                 L72:
   485 000003A1 C6 04 18 00                     	MOV	BYTE [EAX+EBX*1],0
   486 000003A5 EB C1                           	JMP	L63
   487 000003A7                                 	GLOBAL	_draw_block8_8
   488 000003A7                                 _draw_block8_8:
   489 000003A7 55                              	PUSH	EBP
   490 000003A8 89 E5                           	MOV	EBP,ESP
   491 000003AA 57                              	PUSH	EDI
   492 000003AB 56                              	PUSH	ESI
   493 000003AC 31 F6                           	XOR	ESI,ESI
   494 000003AE 53                              	PUSH	EBX
   495 000003AF 83 EC 14                        	SUB	ESP,20
   496 000003B2 E8 FFFFFC5E                     	CALL	_get_vram_addr
   497 000003B7 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   498 000003BA E8 FFFFFC60                     	CALL	_get_screen_width
   499 000003BF 3B 75 0C                        	CMP	ESI,DWORD [12+EBP]
   500 000003C2 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   501 000003C5 7D 3E                           	JGE	L88
   502 000003C7 31 FF                           	XOR	EDI,EDI
   503 000003C9                                 L86:
   504 000003C9 31 DB                           	XOR	EBX,EBX
   505 000003CB 3B 5D 08                        	CMP	EBX,DWORD [8+EBP]
   506 000003CE 7D 2C                           	JGE	L90
   507 000003D0 8B 45 18                        	MOV	EAX,DWORD [24+EBP]
   508 000003D3 01 F8                           	ADD	EAX,EDI
   509 000003D5 89 45 E4                        	MOV	DWORD [-28+EBP],EAX
   510 000003D8                                 L85:
   511 000003D8 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   512 000003DB 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   513 000003DE 01 F0                           	ADD	EAX,ESI
   514 000003E0 01 DA                           	ADD	EDX,EBX
   515 000003E2 0F AF 45 EC                     	IMUL	EAX,DWORD [-20+EBP]
   516 000003E6 01 D0                           	ADD	EAX,EDX
   517 000003E8 8B 4D F0                        	MOV	ECX,DWORD [-16+EBP]
   518 000003EB 8B 55 E4                        	MOV	EDX,DWORD [-28+EBP]
   519 000003EE 43                              	INC	EBX
   520 000003EF 8A 12                           	MOV	DL,BYTE [EDX]
   521 000003F1 88 14 08                        	MOV	BYTE [EAX+ECX*1],DL
   522 000003F4 FF 45 E4                        	INC	DWORD [-28+EBP]
   523 000003F7 3B 5D 08                        	CMP	EBX,DWORD [8+EBP]
   524 000003FA 7C DC                           	JL	L85
   525 000003FC                                 L90:
   526 000003FC 46                              	INC	ESI
   527 000003FD 03 7D 1C                        	ADD	EDI,DWORD [28+EBP]
   528 00000400 3B 75 0C                        	CMP	ESI,DWORD [12+EBP]
   529 00000403 7C C4                           	JL	L86
   530 00000405                                 L88:
   531 00000405 83 C4 14                        	ADD	ESP,20
   532 00000408 5B                              	POP	EBX
   533 00000409 5E                              	POP	ESI
   534 0000040A 5F                              	POP	EDI
   535 0000040B 5D                              	POP	EBP
   536 0000040C C3                              	RET
   537                                          [SECTION .data]
   538 00000140                                 	ALIGNB	4
   539 00000140                                 _vram_addr:
   540 00000140 00 00 00 00                     	RESB	4
   541                                          [SECTION .data]
   542 00000144                                 	ALIGNB	4
   543 00000144                                 _scrn_xsize:
   544 00000144 00 00 00 00                     	RESB	4
